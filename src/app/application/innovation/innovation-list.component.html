<mat-toolbar class="toolbar-prp mat-elevation-z8" [routerLink]="['/home']">&nbsp;&nbsp;&nbsp; SuiBen - {{title | titlecase}}</mat-toolbar>

<div class="table-container container mat-elevation-z4 animate__animated animate__fadeInDown" style="margin-top: 40px;">

	<mat-label><strong>{{title | uppercase}} - Total exploitants : </strong></mat-label>
	&nbsp;&nbsp;
	<mat-form-field>
		<mat-label class="label-head">Recherche</mat-label>
		<input matInput placeholder="Ex. Rakoto" (keyup)="applyFilter($event.target.value)">
	</mat-form-field>
	&nbsp;&nbsp;
	<mat-form-field>
		<mat-select [ngModel]="exploitants" (selectionChange)="onExploitantChange($event.value)">
			<mat-option value="tous">Tous</mat-option>
			<mat-option *ngFor="let domaine of domaines" value="{{ domaine.domaineName }}" class="sl-cedar">{{ domaine.domaineName }}</mat-option>
		</mat-select>
	</mat-form-field>

	<table mat-table class="table-exp" [dataSource]="innovationService.dataSourceInnovation">

		<ng-container matColumnDef="exploitant">
			<th mat-header-cell *matHeaderCellDef> Exploitants </th>
			<td mat-cell  *matCellDef="let element" cdkDrag>
				<strong>{{element.exploitantFirstName | uppercase}} {{ element.exploitantLastName | titlecase }}</strong>  <br>
				{{element.exploitantAge}} ans - {{element.exploitantSex | slice:0:1}} <br>
				{{element.exploitantDate | date: 'yyyy/MM/dd'}} - {{element.exploitantCedar}}
			</td>
			<td mat-footer-cell *matFooterCellDef></td>
		</ng-container>

		<ng-container matColumnDef="localisation">
			<th mat-header-cell *matHeaderCellDef> Localisation </th>
			<td mat-cell *matCellDef="let element">
				<strong>{{element.exploitantCommune | uppercase}} {{ element.exploitantDistrict | titlecase }}</strong>  <br>
				{{element.exploitantFokotany}} - {{element.exploitantRegion}} <br>
			</td>
			<td mat-footer-cell *matFooterCellDef></td>
		</ng-container>

		<ng-container matColumnDef="innovation">
			<th mat-header-cell *matHeaderCellDef> Innovation </th>
			<td mat-cell *matCellDef="let element">
				<span *ngFor="let row of element.innoAcqui">
					{{ row }}<br>
				</span>

				<span *ngFor="let row of element.innoAppli">
					{{ row }}<br>
				</span>

				<span *ngFor="let row of element.innoPerso">
					{{ row }}<br>
				</span>
			</td>
			<td mat-footer-cell *matFooterCellDef></td>
		</ng-container>

		<ng-container matColumnDef="innovationAdd">
			<th mat-header-cell *matHeaderCellDef> Nombre d'innovations  </th>
			<td mat-cell *matCellDef="let element">
				<span *ngFor="let row of element.innoAcqui; count as c; last as isLast">
					<span *ngIf="isLast">{{ c }}</span><br>
				</span>

				<span *ngFor="let row of element.innoAppli; count as c; last as isLast">
					<span *ngIf="isLast">{{ c }}</span><br>
				</span>

				<span *ngFor="let row of element.innoPerso; count as c; last as isLast">
					<span *ngIf="isLast">{{ c }}</span><br>
				</span>
			</td>
			<td mat-footer-cell *matFooterCellDef></td>
		</ng-container>

		<tr mat-header-row *matHeaderRowDef="innovationService.displayedColumnsInnovation; sticky: true"></tr>
		<tr mat-row *matRowDef="let row; columns: innovationService.displayedColumnsInnovation;"></tr>
		<tr mat-footer-row *matFooterRowDef="innovationService.displayedColumnsInnovation"></tr>

	</table>

</div>
